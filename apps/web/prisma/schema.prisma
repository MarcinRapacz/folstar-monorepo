generator client {
  provider = "prisma-client-js"
}

datasource db {
  // provider     = "mysql"
  // url          = env("DATABASE_URL")
  // relationMode = "prisma"
  provider = "sqlite"
  url      = "file:./dev.db"
}

// Product model
// model Product {
//   id           String         @id @default(uuid())
//   name         String
//   description  String
//   price        Float
//   availability Boolean
//   categoryId   String
//   category     Category       @relation(fields: [categoryId], references: [id])
//   tags         Tag[]
//   images       ProductImage[]
//   createdAt    DateTime       @default(now())

//   @@index(categoryId)
// }

// model ProductImage {
//   id               String  @id @default(uuid())
//   assetId          String
//   height           String
//   originalFilename String
//   thumbnailUrl     String
//   url              String
//   width            String
//   product          Product @relation(fields: [productId], references: [id])
//   productId        String

//   @@index(productId)
// }

// model Category {
//   id          String         @id @default(uuid())
//   name        String
//   description String?
//   image       CategoryImage?
//   products    Product[]
// }

// model CategoryImage {
//   id               String   @id @default(uuid())
//   assetId          String
//   height           String
//   originalFilename String
//   thumbnailUrl     String
//   url              String
//   width            String
//   category         Category @relation(fields: [categoryId], references: [id])
//   categoryId       String   @unique

//   @@index(categoryId)
// }

// model Tag {
//   id          String    @id @default(uuid())
//   name        String
//   description String?
//   products    Product[]
// }

// **************************************************************

// model Product {
//   id     String           @id @default(uuid())
//   title  String
//   medias MediaOnProduct[]
// }

// model Category {
//   id     String            @id @default(uuid())
//   title  String
//   medias MediaOnCategory[]
// }

// model Media {
//   id         String            @id @default(uuid())
//   name       String
//   products   MediaOnProduct[]
//   categories MediaOnCategory[]
// }

// model MediaOnCategory {
//   category   Category @relation(fields: [categoryId], references: [id])
//   categoryId String
//   media      Media    @relation(fields: [mediaId], references: [id])
//   mediaId    String

//   @@id([categoryId, mediaId])
// }

// model MediaOnProduct {
//   product   Product @relation(fields: [productId], references: [id])
//   productId String
//   media     Media   @relation(fields: [mediaId], references: [id])
//   mediaId   String

//   @@id([productId, mediaId])
// }

// *****************************************************************************

model Product {
  id           String   @id @default(uuid())
  name         String
  description  String
  price        Float
  availability Boolean
  categoryId   String
  category     Category @relation(fields: [categoryId], references: [id])
  medias       Media[]
  tags         Tag[]
  createdAt    DateTime @default(now())

  @@index(categoryId)
}

model Category {
  id          String    @id @default(uuid())
  name        String
  description String?
  media       Media?    @relation(fields: [mediaId], references: [id])
  mediaId     String?
  products    Product[]

  @@index(mediaId)
}

model Media {
  id               String     @id @default(uuid())
  assetId          String?
  height           String
  originalFilename String
  thumbnailUrl     String?
  url              String?
  width            String
  products         Product[]
  categories       Category[]
}

model Tag {
  id          String    @id @default(uuid())
  name        String
  description String?
  products    Product[]
}
